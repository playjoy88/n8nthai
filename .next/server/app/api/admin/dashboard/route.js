"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/dashboard/route";
exports.ids = ["app/api/admin/dashboard/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fdashboard%2Froute&page=%2Fapi%2Fadmin%2Fdashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fdashboard%2Froute.ts&appDir=C%3A%5CUsers%5CPLANT44%5CDocuments%5Cn8nThai%5Cn8nthai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CPLANT44%5CDocuments%5Cn8nThai%5Cn8nthai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fdashboard%2Froute&page=%2Fapi%2Fadmin%2Fdashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fdashboard%2Froute.ts&appDir=C%3A%5CUsers%5CPLANT44%5CDocuments%5Cn8nThai%5Cn8nthai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CPLANT44%5CDocuments%5Cn8nThai%5Cn8nthai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_PLANT44_Documents_n8nThai_n8nthai_app_api_admin_dashboard_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/admin/dashboard/route.ts */ \"(rsc)/./app/api/admin/dashboard/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/dashboard/route\",\n        pathname: \"/api/admin/dashboard\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/dashboard/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\PLANT44\\\\Documents\\\\n8nThai\\\\n8nthai\\\\app\\\\api\\\\admin\\\\dashboard\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_PLANT44_Documents_n8nThai_n8nthai_app_api_admin_dashboard_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/admin/dashboard/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRmRhc2hib2FyZCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWRtaW4lMkZkYXNoYm9hcmQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhZG1pbiUyRmRhc2hib2FyZCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNQTEFOVDQ0JTVDRG9jdW1lbnRzJTVDbjhuVGhhaSU1Q244bnRoYWklNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q1BMQU5UNDQlNUNEb2N1bWVudHMlNUNuOG5UaGFpJTVDbjhudGhhaSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNxQztBQUNsSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL244bnRoYWkvPzA0ODIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcUExBTlQ0NFxcXFxEb2N1bWVudHNcXFxcbjhuVGhhaVxcXFxuOG50aGFpXFxcXGFwcFxcXFxhcGlcXFxcYWRtaW5cXFxcZGFzaGJvYXJkXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hZG1pbi9kYXNoYm9hcmQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hZG1pbi9kYXNoYm9hcmRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FkbWluL2Rhc2hib2FyZC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFBMQU5UNDRcXFxcRG9jdW1lbnRzXFxcXG44blRoYWlcXFxcbjhudGhhaVxcXFxhcHBcXFxcYXBpXFxcXGFkbWluXFxcXGRhc2hib2FyZFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hZG1pbi9kYXNoYm9hcmQvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fdashboard%2Froute&page=%2Fapi%2Fadmin%2Fdashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fdashboard%2Froute.ts&appDir=C%3A%5CUsers%5CPLANT44%5CDocuments%5Cn8nThai%5Cn8nthai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CPLANT44%5CDocuments%5Cn8nThai%5Cn8nthai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/admin/dashboard/route.ts":
/*!******************************************!*\
  !*** ./app/api/admin/dashboard/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_utils_jwt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/utils/jwt */ \"(rsc)/./lib/utils/jwt.ts\");\n\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_1__.PrismaClient();\nasync function GET(req) {\n    try {\n        // Verify JWT token\n        const authHeader = req.headers.get(\"authorization\");\n        if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"ไม่ได้รับอนุญาต (Unauthorized)\"\n            }, {\n                status: 401\n            });\n        }\n        const token = authHeader.split(\" \")[1];\n        const payload = await (0,_lib_utils_jwt__WEBPACK_IMPORTED_MODULE_2__.verifyToken)(token);\n        if (!payload || !payload.userId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"โทเค็นไม่ถูกต้อง (Invalid token)\"\n            }, {\n                status: 401\n            });\n        }\n        // Check if user exists\n        const user = await prisma.user.findUnique({\n            where: {\n                id: payload.userId\n            }\n        });\n        if (!user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"ไม่พบผู้ใช้ (User not found)\"\n            }, {\n                status: 404\n            });\n        }\n        // For now, we'll assume only admin users will be accessing this route\n        // In a real app, we would add a role field to the User model and check it\n        // Get counts\n        const [userCount, activeUserCount, instanceCount, activeInstanceCount, todayPaymentsSum, monthlyPaymentsSum, pendingPaymentsCount, backupCount] = await Promise.all([\n            // Total users\n            prisma.user.count(),\n            // Active users (not suspended)\n            prisma.user.count({\n                where: {\n                    isActive: true,\n                    isSuspended: false\n                }\n            }),\n            // Total instances\n            prisma.instance.count(),\n            // Active instances (running)\n            prisma.instance.count({\n                where: {\n                    status: \"running\"\n                }\n            }),\n            // Today's payments sum\n            prisma.payment.aggregate({\n                where: {\n                    status: \"success\",\n                    paymentDate: {\n                        gte: new Date(new Date().setHours(0, 0, 0, 0))\n                    }\n                },\n                _sum: {\n                    amount: true\n                }\n            }),\n            // This month's payments sum\n            prisma.payment.aggregate({\n                where: {\n                    status: \"success\",\n                    paymentDate: {\n                        gte: new Date(new Date().setDate(1))\n                    }\n                },\n                _sum: {\n                    amount: true\n                }\n            }),\n            // Pending payments count\n            prisma.payment.count({\n                where: {\n                    status: \"pending\"\n                }\n            }),\n            // Total backups count\n            prisma.backup.count()\n        ]);\n        // Get recent users\n        const recentUsers = await prisma.user.findMany({\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            take: 5,\n            select: {\n                id: true,\n                username: true,\n                email: true,\n                createdAt: true,\n                plan: true\n            }\n        });\n        // Get recent payments\n        const recentPayments = await prisma.payment.findMany({\n            orderBy: {\n                paymentDate: \"desc\"\n            },\n            take: 5,\n            select: {\n                id: true,\n                userId: true,\n                amount: true,\n                status: true,\n                paymentDate: true,\n                user: {\n                    select: {\n                        username: true,\n                        plan: true\n                    }\n                }\n            }\n        });\n        // Format the recent payments to include username and plan\n        const formattedPayments = recentPayments.map((payment)=>({\n                id: payment.id,\n                userId: payment.userId,\n                username: payment.user.username,\n                amount: payment.amount,\n                status: payment.status,\n                paymentDate: payment.paymentDate.toISOString(),\n                plan: payment.user.plan\n            }));\n        // Mock system metrics (in a real system, these would be collected from server monitoring)\n        const systemMetrics = {\n            cpuUsage: Math.floor(Math.random() * 60) + 10,\n            memoryUsage: Math.floor(Math.random() * 50) + 20,\n            diskUsage: Math.floor(Math.random() * 40) + 30\n        };\n        // Mock values for data we don't have in our schema yet\n        const mockOpenSupportTickets = Math.floor(Math.random() * 5);\n        const mockFailedBackups = Math.floor(Math.random() * 3);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            activeUsers: activeUserCount,\n            totalUsers: userCount,\n            activeInstances: activeInstanceCount,\n            totalInstances: instanceCount,\n            dailyRevenue: todayPaymentsSum._sum.amount || 0,\n            monthlyRevenue: monthlyPaymentsSum._sum.amount || 0,\n            pendingPayments: pendingPaymentsCount,\n            openSupportTickets: mockOpenSupportTickets,\n            totalBackups: backupCount,\n            failedBackups: mockFailedBackups,\n            serverUtilization: Math.floor((systemMetrics.cpuUsage + systemMetrics.memoryUsage + systemMetrics.diskUsage) / 3),\n            ...systemMetrics,\n            recentUsers: recentUsers.map((user)=>({\n                    ...user,\n                    createdAt: user.createdAt.toISOString()\n                })),\n            recentPayments: formattedPayments\n        });\n    } catch (error) {\n        console.error(\"Admin dashboard error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"เกิดข้อผิดพลาดในการโหลดข้อมูลแดชบอร์ด\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLRSxNQUFNLEtBQUs7UUFFckQsT0FBTzlELGtGQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFDdkJ5RCxhQUFhN0M7WUFDYjhDLFlBQVkvQztZQUNaZ0QsaUJBQWlCN0M7WUFDakI4QyxnQkFBZ0IvQztZQUNoQmdELGNBQWM5QyxpQkFBaUJnQixJQUFJLENBQUNDLE1BQU0sSUFBSTtZQUM5QzhCLGdCQUFnQjlDLG1CQUFtQmUsSUFBSSxDQUFDQyxNQUFNLElBQUk7WUFDbEQrQixpQkFBaUI5QztZQUNqQitDLG9CQUFvQlQ7WUFDcEJVLGNBQWMvQztZQUNkZ0QsZUFBZVY7WUFDZlcsbUJBQW1CakIsS0FBS0MsS0FBSyxDQUFDLENBQUNILGNBQWNDLFFBQVEsR0FBR0QsY0FBY0ssV0FBVyxHQUFHTCxjQUFjTSxTQUFTLElBQUk7WUFDL0csR0FBR04sYUFBYTtZQUNoQmIsYUFBYUEsWUFBWVcsR0FBRyxDQUFDdkMsQ0FBQUEsT0FBUztvQkFDcEMsR0FBR0EsSUFBSTtvQkFDUCtCLFdBQVcvQixLQUFLK0IsU0FBUyxDQUFDUyxXQUFXO2dCQUN2QztZQUNBSCxnQkFBZ0JDO1FBQ2xCO0lBQ0YsRUFBRSxPQUFPNUMsT0FBTztRQUNkbUUsUUFBUW5FLEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU9YLGtGQUFZQSxDQUFDVSxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBd0MsR0FDakQ7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uOG50aGFpLy4vYXBwL2FwaS9hZG1pbi9kYXNoYm9hcmQvcm91dGUudHM/ZGZjZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XHJcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSAnQC9saWIvdXRpbHMvand0JztcclxuXHJcbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxOiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBWZXJpZnkgSldUIHRva2VuXHJcbiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk7XHJcbiAgICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAn4LmE4Lih4LmI4LmE4LiU4LmJ4Lij4Lix4Lia4Lit4LiZ4Li44LiN4Liy4LiVIChVbmF1dGhvcml6ZWQpJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zcGxpdCgnICcpWzFdO1xyXG4gICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxuXHJcbiAgICBpZiAoIXBheWxvYWQgfHwgIXBheWxvYWQudXNlcklkKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAn4LmC4LiX4LmA4LiE4LmH4LiZ4LmE4Lih4LmI4LiW4Li54LiB4LiV4LmJ4Lit4LiHIChJbnZhbGlkIHRva2VuKScgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiB1c2VyIGV4aXN0c1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC51c2VySWQgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ+C5hOC4oeC5iOC4nuC4muC4nOC4ueC5ieC5g+C4iuC5iSAoVXNlciBub3QgZm91bmQpJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvciBub3csIHdlJ2xsIGFzc3VtZSBvbmx5IGFkbWluIHVzZXJzIHdpbGwgYmUgYWNjZXNzaW5nIHRoaXMgcm91dGVcclxuICAgIC8vIEluIGEgcmVhbCBhcHAsIHdlIHdvdWxkIGFkZCBhIHJvbGUgZmllbGQgdG8gdGhlIFVzZXIgbW9kZWwgYW5kIGNoZWNrIGl0XHJcblxyXG4gICAgLy8gR2V0IGNvdW50c1xyXG4gICAgY29uc3QgW1xyXG4gICAgICB1c2VyQ291bnQsXHJcbiAgICAgIGFjdGl2ZVVzZXJDb3VudCxcclxuICAgICAgaW5zdGFuY2VDb3VudCxcclxuICAgICAgYWN0aXZlSW5zdGFuY2VDb3VudCxcclxuICAgICAgdG9kYXlQYXltZW50c1N1bSxcclxuICAgICAgbW9udGhseVBheW1lbnRzU3VtLFxyXG4gICAgICBwZW5kaW5nUGF5bWVudHNDb3VudCxcclxuICAgICAgYmFja3VwQ291bnRcclxuICAgIF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgIC8vIFRvdGFsIHVzZXJzXHJcbiAgICAgIHByaXNtYS51c2VyLmNvdW50KCksXHJcbiAgICAgIFxyXG4gICAgICAvLyBBY3RpdmUgdXNlcnMgKG5vdCBzdXNwZW5kZWQpXHJcbiAgICAgIHByaXNtYS51c2VyLmNvdW50KHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWUsXHJcbiAgICAgICAgICBpc1N1c3BlbmRlZDogZmFsc2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSksXHJcbiAgICAgIFxyXG4gICAgICAvLyBUb3RhbCBpbnN0YW5jZXNcclxuICAgICAgcHJpc21hLmluc3RhbmNlLmNvdW50KCksXHJcbiAgICAgIFxyXG4gICAgICAvLyBBY3RpdmUgaW5zdGFuY2VzIChydW5uaW5nKVxyXG4gICAgICBwcmlzbWEuaW5zdGFuY2UuY291bnQoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBzdGF0dXM6ICdydW5uaW5nJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9KSxcclxuICAgICAgXHJcbiAgICAgIC8vIFRvZGF5J3MgcGF5bWVudHMgc3VtXHJcbiAgICAgIHByaXNtYS5wYXltZW50LmFnZ3JlZ2F0ZSh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgICAgcGF5bWVudERhdGU6IHtcclxuICAgICAgICAgICAgZ3RlOiBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldEhvdXJzKDAsIDAsIDAsIDApKSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfc3VtOiB7XHJcbiAgICAgICAgICBhbW91bnQ6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSksXHJcbiAgICAgIFxyXG4gICAgICAvLyBUaGlzIG1vbnRoJ3MgcGF5bWVudHMgc3VtXHJcbiAgICAgIHByaXNtYS5wYXltZW50LmFnZ3JlZ2F0ZSh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgICAgcGF5bWVudERhdGU6IHtcclxuICAgICAgICAgICAgZ3RlOiBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUoMSkpLCAvLyBGaXJzdCBkYXkgb2YgY3VycmVudCBtb250aFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9zdW06IHtcclxuICAgICAgICAgIGFtb3VudDogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KSxcclxuICAgICAgXHJcbiAgICAgIC8vIFBlbmRpbmcgcGF5bWVudHMgY291bnRcclxuICAgICAgcHJpc21hLnBheW1lbnQuY291bnQoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9KSxcclxuICAgICAgXHJcbiAgICAgIC8vIFRvdGFsIGJhY2t1cHMgY291bnRcclxuICAgICAgcHJpc21hLmJhY2t1cC5jb3VudCgpLFxyXG4gICAgXSk7XHJcblxyXG4gICAgLy8gR2V0IHJlY2VudCB1c2Vyc1xyXG4gICAgY29uc3QgcmVjZW50VXNlcnMgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7XHJcbiAgICAgIG9yZGVyQnk6IHtcclxuICAgICAgICBjcmVhdGVkQXQ6ICdkZXNjJyxcclxuICAgICAgfSxcclxuICAgICAgdGFrZTogNSxcclxuICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgdXNlcm5hbWU6IHRydWUsXHJcbiAgICAgICAgZW1haWw6IHRydWUsXHJcbiAgICAgICAgY3JlYXRlZEF0OiB0cnVlLFxyXG4gICAgICAgIHBsYW46IHRydWUsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBHZXQgcmVjZW50IHBheW1lbnRzXHJcbiAgICBjb25zdCByZWNlbnRQYXltZW50cyA9IGF3YWl0IHByaXNtYS5wYXltZW50LmZpbmRNYW55KHtcclxuICAgICAgb3JkZXJCeToge1xyXG4gICAgICAgIHBheW1lbnREYXRlOiAnZGVzYycsXHJcbiAgICAgIH0sXHJcbiAgICAgIHRha2U6IDUsXHJcbiAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgIHVzZXJJZDogdHJ1ZSxcclxuICAgICAgICBhbW91bnQ6IHRydWUsXHJcbiAgICAgICAgc3RhdHVzOiB0cnVlLFxyXG4gICAgICAgIHBheW1lbnREYXRlOiB0cnVlLFxyXG4gICAgICAgIHVzZXI6IHtcclxuICAgICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgICB1c2VybmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgcGxhbjogdHJ1ZSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEZvcm1hdCB0aGUgcmVjZW50IHBheW1lbnRzIHRvIGluY2x1ZGUgdXNlcm5hbWUgYW5kIHBsYW5cclxuICAgIGNvbnN0IGZvcm1hdHRlZFBheW1lbnRzID0gcmVjZW50UGF5bWVudHMubWFwKHBheW1lbnQgPT4gKHtcclxuICAgICAgaWQ6IHBheW1lbnQuaWQsXHJcbiAgICAgIHVzZXJJZDogcGF5bWVudC51c2VySWQsXHJcbiAgICAgIHVzZXJuYW1lOiBwYXltZW50LnVzZXIudXNlcm5hbWUsXHJcbiAgICAgIGFtb3VudDogcGF5bWVudC5hbW91bnQsXHJcbiAgICAgIHN0YXR1czogcGF5bWVudC5zdGF0dXMsXHJcbiAgICAgIHBheW1lbnREYXRlOiBwYXltZW50LnBheW1lbnREYXRlLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIHBsYW46IHBheW1lbnQudXNlci5wbGFuLFxyXG4gICAgfSkpO1xyXG5cclxuICAgIC8vIE1vY2sgc3lzdGVtIG1ldHJpY3MgKGluIGEgcmVhbCBzeXN0ZW0sIHRoZXNlIHdvdWxkIGJlIGNvbGxlY3RlZCBmcm9tIHNlcnZlciBtb25pdG9yaW5nKVxyXG4gICAgY29uc3Qgc3lzdGVtTWV0cmljcyA9IHtcclxuICAgICAgY3B1VXNhZ2U6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYwKSArIDEwLCAvLyBSYW5kb20gdmFsdWUgYmV0d2VlbiAxMC03MCVcclxuICAgICAgbWVtb3J5VXNhZ2U6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUwKSArIDIwLCAvLyBSYW5kb20gdmFsdWUgYmV0d2VlbiAyMC03MCVcclxuICAgICAgZGlza1VzYWdlOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0MCkgKyAzMCwgLy8gUmFuZG9tIHZhbHVlIGJldHdlZW4gMzAtNzAlXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIE1vY2sgdmFsdWVzIGZvciBkYXRhIHdlIGRvbid0IGhhdmUgaW4gb3VyIHNjaGVtYSB5ZXRcclxuICAgIGNvbnN0IG1vY2tPcGVuU3VwcG9ydFRpY2tldHMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KTtcclxuICAgIGNvbnN0IG1vY2tGYWlsZWRCYWNrdXBzID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMyk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgYWN0aXZlVXNlcnM6IGFjdGl2ZVVzZXJDb3VudCxcclxuICAgICAgdG90YWxVc2VyczogdXNlckNvdW50LFxyXG4gICAgICBhY3RpdmVJbnN0YW5jZXM6IGFjdGl2ZUluc3RhbmNlQ291bnQsXHJcbiAgICAgIHRvdGFsSW5zdGFuY2VzOiBpbnN0YW5jZUNvdW50LFxyXG4gICAgICBkYWlseVJldmVudWU6IHRvZGF5UGF5bWVudHNTdW0uX3N1bS5hbW91bnQgfHwgMCxcclxuICAgICAgbW9udGhseVJldmVudWU6IG1vbnRobHlQYXltZW50c1N1bS5fc3VtLmFtb3VudCB8fCAwLFxyXG4gICAgICBwZW5kaW5nUGF5bWVudHM6IHBlbmRpbmdQYXltZW50c0NvdW50LFxyXG4gICAgICBvcGVuU3VwcG9ydFRpY2tldHM6IG1vY2tPcGVuU3VwcG9ydFRpY2tldHMsIC8vIE1vY2sgZGF0YVxyXG4gICAgICB0b3RhbEJhY2t1cHM6IGJhY2t1cENvdW50LFxyXG4gICAgICBmYWlsZWRCYWNrdXBzOiBtb2NrRmFpbGVkQmFja3VwcywgLy8gTW9jayBkYXRhXHJcbiAgICAgIHNlcnZlclV0aWxpemF0aW9uOiBNYXRoLmZsb29yKChzeXN0ZW1NZXRyaWNzLmNwdVVzYWdlICsgc3lzdGVtTWV0cmljcy5tZW1vcnlVc2FnZSArIHN5c3RlbU1ldHJpY3MuZGlza1VzYWdlKSAvIDMpLFxyXG4gICAgICAuLi5zeXN0ZW1NZXRyaWNzLFxyXG4gICAgICByZWNlbnRVc2VyczogcmVjZW50VXNlcnMubWFwKHVzZXIgPT4gKHtcclxuICAgICAgICAuLi51c2VyLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogdXNlci5jcmVhdGVkQXQudG9JU09TdHJpbmcoKSxcclxuICAgICAgfSkpLFxyXG4gICAgICByZWNlbnRQYXltZW50czogZm9ybWF0dGVkUGF5bWVudHMsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQWRtaW4gZGFzaGJvYXJkIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ+C5gOC4geC4tOC4lOC4guC5ieC4reC4nOC4tOC4lOC4nuC4peC4suC4lOC5g+C4meC4geC4suC4o+C5guC4q+C4peC4lOC4guC5ieC4reC4oeC4ueC4peC5geC4lOC4iuC4muC4reC4o+C5jOC4lCcgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiUHJpc21hQ2xpZW50IiwidmVyaWZ5VG9rZW4iLCJwcmlzbWEiLCJHRVQiLCJyZXEiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImdldCIsInN0YXJ0c1dpdGgiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJ0b2tlbiIsInNwbGl0IiwicGF5bG9hZCIsInVzZXJJZCIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsInVzZXJDb3VudCIsImFjdGl2ZVVzZXJDb3VudCIsImluc3RhbmNlQ291bnQiLCJhY3RpdmVJbnN0YW5jZUNvdW50IiwidG9kYXlQYXltZW50c1N1bSIsIm1vbnRobHlQYXltZW50c1N1bSIsInBlbmRpbmdQYXltZW50c0NvdW50IiwiYmFja3VwQ291bnQiLCJQcm9taXNlIiwiYWxsIiwiY291bnQiLCJpc0FjdGl2ZSIsImlzU3VzcGVuZGVkIiwiaW5zdGFuY2UiLCJwYXltZW50IiwiYWdncmVnYXRlIiwicGF5bWVudERhdGUiLCJndGUiLCJEYXRlIiwic2V0SG91cnMiLCJfc3VtIiwiYW1vdW50Iiwic2V0RGF0ZSIsImJhY2t1cCIsInJlY2VudFVzZXJzIiwiZmluZE1hbnkiLCJvcmRlckJ5IiwiY3JlYXRlZEF0IiwidGFrZSIsInNlbGVjdCIsInVzZXJuYW1lIiwiZW1haWwiLCJwbGFuIiwicmVjZW50UGF5bWVudHMiLCJmb3JtYXR0ZWRQYXltZW50cyIsIm1hcCIsInRvSVNPU3RyaW5nIiwic3lzdGVtTWV0cmljcyIsImNwdVVzYWdlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibWVtb3J5VXNhZ2UiLCJkaXNrVXNhZ2UiLCJtb2NrT3BlblN1cHBvcnRUaWNrZXRzIiwibW9ja0ZhaWxlZEJhY2t1cHMiLCJhY3RpdmVVc2VycyIsInRvdGFsVXNlcnMiLCJhY3RpdmVJbnN0YW5jZXMiLCJ0b3RhbEluc3RhbmNlcyIsImRhaWx5UmV2ZW51ZSIsIm1vbnRobHlSZXZlbnVlIiwicGVuZGluZ1BheW1lbnRzIiwib3BlblN1cHBvcnRUaWNrZXRzIiwidG90YWxCYWNrdXBzIiwiZmFpbGVkQmFja3VwcyIsInNlcnZlclV0aWxpemF0aW9uIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/admin/dashboard/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/utils/jwt.ts":
/*!**************************!*\
  !*** ./lib/utils/jwt.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createRefreshToken: () => (/* binding */ createRefreshToken),\n/* harmony export */   createToken: () => (/* binding */ createToken),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\n// Get JWT secret from environment variables\nconst JWT_SECRET = process.env.JWT_SECRET || \"fallback-secret-change-in-production\";\nconst JWT_EXPIRY = process.env.JWT_EXPIRY || \"24h\";\n// Create a JWT token for the user\nfunction createToken(payload) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, JWT_SECRET, {\n        expiresIn: JWT_EXPIRY\n    });\n}\n// Verify a JWT token\nfunction verifyToken(token) {\n    try {\n        const payload = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n        return payload;\n    } catch (error) {\n        throw new Error(\"Invalid token\");\n    }\n}\n// Create a refresh token\nfunction createRefreshToken(userId) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n        userId\n    }, JWT_SECRET, {\n        expiresIn: \"7d\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdXRpbHMvand0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQStCO0FBRS9CLDRDQUE0QztBQUM1QyxNQUFNQyxhQUFhQyxRQUFRQyxHQUFHLENBQUNGLFVBQVUsSUFBSTtBQUM3QyxNQUFNRyxhQUFhRixRQUFRQyxHQUFHLENBQUNDLFVBQVUsSUFBSTtBQVE3QyxrQ0FBa0M7QUFDM0IsU0FBU0MsWUFBWUMsT0FBbUI7SUFDM0MsT0FBT04sd0RBQVEsQ0FBQ00sU0FBU0wsWUFBWTtRQUNqQ08sV0FBV0o7SUFDZjtBQUNKO0FBRUEscUJBQXFCO0FBQ2QsU0FBU0ssWUFBWUMsS0FBYTtJQUNyQyxJQUFJO1FBQ0EsTUFBTUosVUFBVU4sMERBQVUsQ0FBQ1UsT0FBT1Q7UUFDbEMsT0FBT0s7SUFDWCxFQUFFLE9BQU9NLE9BQU87UUFDWixNQUFNLElBQUlDLE1BQU07SUFDcEI7QUFDSjtBQUVBLHlCQUF5QjtBQUNsQixTQUFTQyxtQkFBbUJDLE1BQWM7SUFDN0MsT0FBT2Ysd0RBQVEsQ0FBQztRQUFFZTtJQUFPLEdBQUdkLFlBQVk7UUFDcENPLFdBQVc7SUFDZjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbjhudGhhaS8uL2xpYi91dGlscy9qd3QudHM/MWNjNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcblxyXG4vLyBHZXQgSldUIHNlY3JldCBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlc1xyXG5jb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAnZmFsbGJhY2stc2VjcmV0LWNoYW5nZS1pbi1wcm9kdWN0aW9uJztcclxuY29uc3QgSldUX0VYUElSWSA9IHByb2Nlc3MuZW52LkpXVF9FWFBJUlkgfHwgJzI0aCc7XHJcblxyXG5pbnRlcmZhY2UgSnd0UGF5bG9hZCB7XHJcbiAgICB1c2VySWQ6IHN0cmluZztcclxuICAgIGVtYWlsOiBzdHJpbmc7XHJcbiAgICB1c2VybmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG4vLyBDcmVhdGUgYSBKV1QgdG9rZW4gZm9yIHRoZSB1c2VyXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUb2tlbihwYXlsb2FkOiBKd3RQYXlsb2FkKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBqd3Quc2lnbihwYXlsb2FkLCBKV1RfU0VDUkVULCB7XHJcbiAgICAgICAgZXhwaXJlc0luOiBKV1RfRVhQSVJZXHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gVmVyaWZ5IGEgSldUIHRva2VuXHJcbmV4cG9ydCBmdW5jdGlvbiB2ZXJpZnlUb2tlbih0b2tlbjogc3RyaW5nKTogSnd0UGF5bG9hZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVUKSBhcyBKd3RQYXlsb2FkO1xyXG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdG9rZW4nKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gQ3JlYXRlIGEgcmVmcmVzaCB0b2tlblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVmcmVzaFRva2VuKHVzZXJJZDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBqd3Quc2lnbih7IHVzZXJJZCB9LCBKV1RfU0VDUkVULCB7XHJcbiAgICAgICAgZXhwaXJlc0luOiAnN2QnXHJcbiAgICB9KTtcclxufVxyXG4iXSwibmFtZXMiOlsiand0IiwiSldUX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfRVhQSVJZIiwiY3JlYXRlVG9rZW4iLCJwYXlsb2FkIiwic2lnbiIsImV4cGlyZXNJbiIsInZlcmlmeVRva2VuIiwidG9rZW4iLCJ2ZXJpZnkiLCJlcnJvciIsIkVycm9yIiwiY3JlYXRlUmVmcmVzaFRva2VuIiwidXNlcklkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils/jwt.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/jws","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/safe-buffer","vendor-chunks/ms","vendor-chunks/lodash.once","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isinteger","vendor-chunks/lodash.isboolean","vendor-chunks/lodash.includes","vendor-chunks/jwa","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fdashboard%2Froute&page=%2Fapi%2Fadmin%2Fdashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fdashboard%2Froute.ts&appDir=C%3A%5CUsers%5CPLANT44%5CDocuments%5Cn8nThai%5Cn8nthai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CPLANT44%5CDocuments%5Cn8nThai%5Cn8nthai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();